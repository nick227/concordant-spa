(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{4750:function(t,i,r){"use strict";r.r(i);var e=function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("q-page",{staticClass:"river-width",attrs:{padding:""}},[r("div",{staticClass:"q-pa-md q-gutter-sm"},[r("div",{staticClass:"text-center"},[r("h3",[t._v(t._s(t.org.name))]),r("h6",[t._v(t._s(t.org.description))])]),r("transition",{attrs:{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[r("q-img",{staticClass:"full-width q-mt-none",attrs:{src:t.org.avatar_url}})],1)],1),r("q-btn",{staticClass:"full-width",staticStyle:{width:"100px"},attrs:{label:t.isMember?"Unjoin":"Join",color:t.isMember?"secondary":"primary",ripple:{center:!0}},on:{click:function(i){t.isMember?t.unjoin(t.org.id):t.join(t.org.id)}}}),t.members.length?r("div",{staticClass:"q-pa-md q-gutter-sm"},[r("h6",[t._v("Members")]),r("q-list",t._l(t.members,(function(i){return r("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:i.id,attrs:{clickable:"",to:"/profile/"+i.id}},[r("q-item-section",{attrs:{avatar:""}},[r("q-avatar",{attrs:{rounded:""}},[r("img",{attrs:{src:i.avatar_url}})])],1),r("q-item-section",{},[r("div",{},[t._v(t._s(i.name)),r("BR"),t._v(t._s(i.location))],1)])],1)})),1)],1):t._e(),r("q-separator"),t.conflicts.length?r("div",{staticClass:"q-pa-md q-gutter-sm"},[r("h6",[t._v("Conflicts")]),r("q-list",t._l(t.conflicts,(function(i){return r("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:i.id,attrs:{clickable:"",to:"/conflict/"+i.id}},[r("q-item-section",{attrs:{avatar:""}},[r("q-avatar",{attrs:{rounded:""}},[r("img",{attrs:{src:i.avatar_url}})])],1),r("q-item-section",{},[r("div",{},[t._v(t._s(i.name)),r("BR"),r("span",{staticClass:"ellipsis-2-lines"},[t._v(t._s(i.description))])],1)])],1)})),1)],1):t._e()],1)},a=[],s=r("c973"),n=r.n(s),o={meta(){return{title:this.org.name}},name:"Organization",data(){return{org:{},members:[],conflicts:[],isMember:!1}},mounted(){var t=this;return n()((function*(){t.reload()}))()},methods:{reload:function(){var t=n()((function*(){this.loadOrg(),this.loadMembers(),this.loadConflicts()}));return function(){return t.apply(this,arguments)}}(),join:function(){var t=n()((function*(t){if(!this.$errorHandler.loggedInCheck())return!1;const i="https://concordant-api.herokuapp.com/user-to-organizations",r={creator_user_id:this.$store.state.user.uid,organization_id:t};yield this.$axios.post(i,r,{headers:{Accept:"application/json"}}),this.reload()}));return function(i){return t.apply(this,arguments)}}(),unjoin:function(){var t=n()((function*(t){if(!this.$errorHandler.loggedInCheck())return!1;let i=`https://concordant-api.herokuapp.com/user-to-organizations?filter[where][and][0][creator_user_id]=${this.$store.state.user.uid}&filter[where][and][1][organization_id]=${this.org.id}&filter[fields][id]=true`;const r=yield this.$axios.get(i);i="https://concordant-api.herokuapp.com/user-to-organizations/"+r.data[0].id,yield this.$axios.delete(i),this.reload()}));return function(i){return t.apply(this,arguments)}}(),loadOrg:function(){var t=n()((function*(){const t="https://concordant-api.herokuapp.com/organizations/"+this.$route.params.id,i=yield this.$axios.get(t);this.org=i.data}));return function(){return t.apply(this,arguments)}}(),loadMembers:function(){var t=n()((function*(){const t=`https://concordant-api.herokuapp.com/organizations/${this.$route.params.id}/users`,i=yield this.$axios.get(t);this.members=i.data,this.isMember=this.members.filter(t=>t.id===this.$store.state.user.uid).length>0}));return function(){return t.apply(this,arguments)}}(),loadConflicts:function(){var t=n()((function*(){const t=`https://concordant-api.herokuapp.com/conflicts?filter[where][or][0][organization_a_id]=${this.$route.params.id}&filter[where][or][1][organization_b_id]=${this.$route.params.id}`,i=yield this.$axios.get(t);this.conflicts=i.data}));return function(){return t.apply(this,arguments)}}()}},c=o,l=r("2877"),d=Object(l["a"])(c,e,a,!1,null,null,null);i["default"]=d.exports}}]);