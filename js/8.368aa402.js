(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"62cc":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{staticClass:"river-width flex-middle"},[n("div",{staticClass:"q-mt-xl"},[n("q-btn",{staticClass:"full-width",attrs:{color:"primary",push:"",icon:"facebook",label:"Login with Facebook",size:"md"},on:{click:function(e){return t.auth("facebook")}}})],1)])},r=[],a=n("c973"),o=n.n(a),s={meta(){return{title:"Login"}},name:"Login",methods:{auth:function(){var t=o()((function*(t){this.$hello(t).login().then(e=>{this.$hello(t).api("me").then(t=>{this.checkUser(t)})})}));return function(e){return t.apply(this,arguments)}}(),checkUser:function(){var t=o()((function*(t){const e="http://72.177.0.66:3000//users?filter[where][facebook_uuid]="+t.id,n=yield this.$axios.get(e);n.data.length?(this.addStoreUser(n),window.location.href="/"):this.addDbUser(n)}));return function(e){return t.apply(this,arguments)}}(),addDbUser:function(){var t=o()((function*(t){const e="http://72.177.0.66:3000//users",n={name:t.name,avatar_url:t.picture,facebook_uuid:t.id};this.$axios.post(e,n).then((function(t){this.addStoreUser(t),this.$router.push("/")})).catch((function(t){this.$q.notify({type:"negative",icon:"error",message:t})}))}));return function(e){return t.apply(this,arguments)}}(),addStoreUser:function(){var t=o()((function*(t){this.$store.commit("user/updateUid",t.data[0].id),this.$store.commit("user/updateAvatar",t.data[0].avatar_url)}));return function(e){return t.apply(this,arguments)}}()}},u=s,c=n("2877"),h=Object(c["a"])(u,i,r,!1,null,null,null);e["default"]=h.exports}}]);